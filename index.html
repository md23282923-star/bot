<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ELITE NETWORK - Premium Airdrop</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://sad.adsgram.ai/js/adsgram-ad-sdk.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root { --gold: #ffcc00; --bg: #000; --card: #111; --elite-grad: linear-gradient(135deg, #ffcc00, #ff9900); }
        body { background: var(--bg); color: #fff; font-family: 'Poppins', sans-serif; margin: 0; overflow: hidden; user-select: none; }
        
        /* Global Stats Header */
        .global-stats { background: #1a1a1a; padding: 10px; text-align: center; font-size: 10px; border-bottom: 1px solid var(--gold); letter-spacing: 1px; }
        
        .page { display: none; height: 100vh; overflow-y: auto; padding: 20px; box-sizing: border-box; padding-bottom: 150px; }
        .active-page { display: block; animation: zoomIn 0.3s; }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        /* Balance Section */
        .balance-card { text-align: center; margin: 20px 0; }
        .balance-card h1 { font-size: 45px; margin: 0; background: var(--elite-grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 900; }
        
        /* Spin Wheel Style */
        .spin-container { background: var(--card); border: 2px solid var(--gold); border-radius: 20px; padding: 20px; text-align: center; margin-top: 20px; }
        .wheel { width: 150px; height: 150px; border: 5px solid var(--gold); border-radius: 50%; margin: 10px auto; display: flex; align-items: center; justify-content: center; font-weight: bold; transition: 3s cubic-bezier(0.1, 0, 0.1, 1); }

        /* Turbo Button */
        .turbo-btn { background: linear-gradient(45deg, #ff4444, #ffcc00); color: #000; border: none; padding: 15px; border-radius: 12px; font-weight: 900; width: 100%; margin-top: 10px; display: none; }

        /* Navigation */
        .nav { position: fixed; bottom: 0; width: 100%; height: 80px; background: #000; display: flex; border-top: 1px solid #222; }
        .nav-item { flex: 1; text-align: center; color: #555; padding-top: 15px; font-size: 11px; }
        .nav-item.active { color: var(--gold); }
        .nav-item i { font-size: 24px; display: block; margin-bottom: 4px; }

        /* Coin */
        .coin-box { display: flex; justify-content: center; margin: 20px 0; }
        #coin { width: 220px; height: 220px; background: radial-gradient(circle, #333 0%, #000 100%); border-radius: 50%; border: 8px solid #1a1a1a; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 30px rgba(255, 204, 0, 0.2); }
        #coin h2 { color: var(--gold); font-size: 30px; letter-spacing: 5px; }
        #coin:active { transform: scale(0.92); }

        .asset-box { background: #111; border: 1px solid #222; border-radius: 15px; padding: 15px; margin-top: 10px; }
        .btn-main { background: var(--gold); color: #000; border: none; padding: 12px; border-radius: 10px; font-weight: bold; width: 100%; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="global-stats">
        COMMUNITY MINED: <span id="global-total" style="color:var(--gold)">00.00M</span> TTE
    </div>

    <div id="home" class="page active-page">
        <div class="balance-card">
            <h1 id="balance">0</h1>
            <div style="font-size: 12px; letter-spacing: 2px; color: var(--gold);">TOTAL TTE ASSETS</div>
        </div>

        <div class="coin-box">
            <div id="coin" onclick="handleTap(event)">
                <h2>ELITE</h2>
            </div>
        </div>

        <div class="asset-box">
            <div style="display:flex; justify-content:space-between; font-size: 12px;">
                <span>⚡ Energy: <span id="energy-val">1000</span></span>
                <span id="turbo-status" style="color:#00ffcc">Normal Mode</span>
            </div>
            <div style="height:8px; background:#222; border-radius:10px; margin-top:8px; overflow:hidden;">
                <div id="energy-bar" style="height:100%; background:var(--gold); width:100%;"></div>
            </div>
        </div>
    </div>

    <div id="earn" class="page">
        <h2 style="color:var(--gold)">Boost Your Assets</h2>
        
        <div class="spin-container">
            <h4 style="margin:0">Lucky Spin Wheel</h4>
            <p style="font-size: 11px; color: #888;">Win direct $ELITE Tokens (Max 5/day)</p>
            <div id="wheel" class="wheel">?</div>
            <p id="spins-left" style="font-size: 12px;">Spins Left: 5</p>
            <button class="btn-main" onclick="playSpin()">Watch Ad to Spin</button>
        </div>

        <div class="asset-box" style="margin-top:20px;">
            <h4>Turbo Multiplier</h4>
            <p style="font-size: 11px; color:#aaa;">Activate 5x Tap Power for 3 minutes!</p>
            <button class="btn-main" style="background:#ff4444; color:#fff;" onclick="activateTurbo()">Activate Turbo Mode</button>
        </div>
    </div>

    <div id="wallet" class="page">
        <h2 style="color:var(--gold)">Digital Assets</h2>
        <div class="asset-box">
            <div style="color:#888; font-size:12px;">Main Asset</div>
            <div style="font-size:24px; font-weight:900; color:var(--gold);">$ELITE: <span id="elite-asset">0.00</span></div>
            <div style="color:#00ffcc; font-size:10px; margin-top:5px;">Estimated Value: High Premium</div>
        </div>
        
        <div class="asset-box" style="margin-top:15px;">
            <p style="font-size:12px;">Connect your TON Wallet for 2026 Distribution.</p>
            <input type="text" id="wallet-input" placeholder="UQ..." style="width:100%; padding:12px; background:#000; border:1px solid #333; border-radius:8px; color:#fff;">
            <button class="btn-main" onclick="saveWallet()">Save Wallet Address</button>
        </div>
    </div>

    <nav class="nav">
        <div class="nav-item active" onclick="nav('home', this)"><i class="fas fa-hammer"></i>Mine</div>
        <div class="nav-item" onclick="nav('earn', this)"><i class="fas fa-bullseye"></i>Spin</div>
        <div class="nav-item" onclick="nav('wallet', this)"><i class="fas fa-wallet"></i>Assets</div>
    </nav>

    <script>
        // --- CONFIG (SAME AS YOURS) ---
        const firebaseConfig = {
            apiKey: "AIzaSyAn1mn3IZ6eReChizrKIZvCBt4zkOn_svU",
            authDomain: "tte-game.firebaseapp.com",
            databaseURL: "https://tte-game-default-rtdb.firebaseio.com",
            projectId: "tte-game",
            storageBucket: "tte-game.firebasestorage.app",
            messagingSenderId: "1067385955645",
            appId: "1:1067385955645:web:09b237ceaf180459311154"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        const tg = window.Telegram.WebApp;
        tg.expand();

        const userId = tg.initDataUnsafe.user ? tg.initDataUnsafe.user.id : "user_test";
        let balance = 0, energy = 1000, eliteAsset = 0, spins = 5;
        let isTurbo = false, tapPower = 1;

        // Million Formatter
        function formatNum(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(2) + 'M';
            return Math.floor(num).toLocaleString();
        }

        // Sync Data
        db.ref('users/' + userId).on('value', (snap) => {
            const d = snap.val();
            if(d) {
                balance = d.balance || 0;
                eliteAsset = d.eliteAsset || 0;
                spins = d.spins !== undefined ? d.spins : 5;
                document.getElementById('balance').innerText = formatNum(balance);
                document.getElementById('elite-asset').innerText = eliteAsset.toFixed(2);
                document.getElementById('spins-left').innerText = "Spins Left: " + spins;
                if(d.wallet) document.getElementById('wallet-input').value = d.wallet;
            } else {
                db.ref('users/' + userId).set({ balance: 0, eliteAsset: 0, spins: 5 });
            }
        });

        // Global Stats
        db.ref('global_stats').on('value', (snap) => {
            const total = snap.val() || 0;
            document.getElementById('global-total').innerText = (total / 1000000).toFixed(2) + "M";
        });

        function handleTap(e) {
            if(energy >= tapPower) {
                balance += tapPower;
                energy -= tapPower;
                updateUI();
                showAnim(e);
                db.ref('users/' + userId).update({ balance: balance });
                db.ref('global_stats').set(firebase.database.ServerValue.increment(tapPower));
                tg.HapticFeedback.impactOccurred('light');
            }
        }

        function activateTurbo() {
            const AdController = window.Adsgram.init({ blockId: "21556" });
            AdController.show().then(() => {
                isTurbo = true; tapPower = 5;
                document.getElementById('turbo-status').innerText = "TURBO 5X ACTIVE!";
                document.getElementById('turbo-status').style.color = "#ffcc00";
                setTimeout(() => {
                    isTurbo = false; tapPower = 1;
                    document.getElementById('turbo-status').innerText = "Normal Mode";
                }, 180000); // 3 mins
            });
        }

        function playSpin() {
            if(spins > 0) {
                const AdController = window.Adsgram.init({ blockId: "21556" });
                AdController.show().then(() => {
                    const wheel = document.getElementById('wheel');
                    wheel.innerText = "旋";
                    const winAmount = (Math.random() * 0.5).toFixed(2);
                    setTimeout(() => {
                        eliteAsset = parseFloat(eliteAsset) + parseFloat(winAmount);
                        spins -= 1;
                        db.ref('users/' + userId).update({ eliteAsset: eliteAsset, spins: spins });
                        wheel.innerText = winAmount + " ELITE";
                        tg.showAlert("Congrats! You won " + winAmount + " $ELITE");
                    }, 2000);
                });
            } else {
                tg.showAlert("No more spins for today!");
            }
        }

        function updateUI() {
            document.getElementById('energy-val').innerText = energy;
            document.getElementById('energy-bar').style.width = (energy/10) + "%";
        }

        function showAnim(e) {
            const x = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
            const y = e.type === 'touchstart' ? e.touches[0].clientY : e.clientY;
            const t = document.createElement('div');
            t.style.position = 'absolute'; t.style.left = x+'px'; t.style.top = y+'px';
            t.style.color = '#fff'; t.style.fontWeight = 'bold'; t.innerText = '+'+tapPower;
            t.style.animation = 'floatUp 0.6s forwards';
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 600);
        }

        function nav(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
            document.getElementById(id).classList.add('active-page');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }

        function saveWallet() {
            const val = document.getElementById('wallet-input').value;
            db.ref('users/' + userId).update({ wallet: val });
            tg.showAlert("Wallet Saved!");
        }

        setInterval(() => { if(energy < 1000) energy += 3; updateUI(); }, 1500);
    </script>
</body>
</html>
