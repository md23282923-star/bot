<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TTE - The Elite Airdrop</title>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{margin:0;background:#0b0c10;color:#fff;font-family:Arial}
.page{display:none;padding:20px}
.active{display:block}
button{padding:10px 15px;border:none;border-radius:8px;background:#ffcc00;font-weight:bold}
.nav{position:fixed;bottom:0;width:100%;display:flex;background:#000}
.nav div{flex:1;text-align:center;padding:10px;color:#888}
.nav .on{color:#ffcc00}
.card{background:#1f2833;margin:10px 0;padding:15px;border-radius:10px}
</style>
</head>

<body>

<div id="home" class="page active">
<h2>ğŸ’° Balance</h2>
<h1 id="bal">0</h1>

<button id="tap">ğŸ”¥ TAP</button>

<p>âš¡ Energy: <span id="eng">1000</span></p>

<hr>

<button id="dailyBtn" onclick="claimDaily()">ğŸ Daily Reward</button>
<p>ğŸ”¥ Streak: <span id="streak">0</span></p>

</div>

<div id="leader" class="page">
<h2>ğŸ† Leaderboard</h2>
<div id="leaderboard"></div>
</div>

<div id="ref" class="page">
<h2>ğŸ‘¥ Referral</h2>
<input id="refLink" style="width:100%" readonly>
<p>Total Referrals: <span id="refCount">0</span></p>
</div>

<div class="nav">
<div class="on" onclick="show('home',this)">Earn</div>
<div onclick="show('leader',this)">Rank</div>
<div onclick="show('ref',this)">Refer</div>
</div>

<script>
// ğŸ”¥ FIREBASE
firebase.initializeApp({
 apiKey: "AIzaSyAn1mn3IZ6eReChizrKIZvCBt4zkOn_svU",
 authDomain: "tte-game.firebaseapp.com",
 databaseURL: "https://tte-game-default-rtdb.firebaseio.com",
 projectId: "tte-game"
});
const db = firebase.database();

// ğŸ”¥ TELEGRAM
const tg = window.Telegram.WebApp;
tg.expand();
const userId = tg.initDataUnsafe?.user?.id || "guest";

// ğŸ”¥ USER DATA
let balance=0, energy=1000, tapPower=1;
let lastTap=0, cheat=0;
let streak=0, lastClaim="";

// ğŸ”¥ DB REF
const userRef = db.ref("users/"+userId);

// ğŸ”¥ LOAD USER
userRef.on("value",s=>{
 if(!s.exists()){
  userRef.set({
   balance:0,
   energy:1000,
   streak:0,
   lastClaim:"",
   referrals:0
  });
 }else{
  const d=s.val();
  balance=d.balance||0;
  energy=d.energy||1000;
  streak=d.streak||0;
  lastClaim=d.lastClaim||"";
  updateUI();
 }
});

// ğŸ”¥ TAP SYSTEM + ANTI BOT
document.getElementById("tap").onclick=()=>{
 let now=Date.now();
 if(now-lastTap<70){cheat++; if(cheat>10)return;}
 lastTap=now;

 if(energy<=0)return;

 balance+=tapPower;
 energy--;

 userRef.update({balance,energy});
 updateUI();
};

// ğŸ”¥ DAILY REWARD
function claimDaily(){
 let today=new Date().toISOString().slice(0,10);
 if(lastClaim===today)return;

 streak++;
 balance+=5000;

 userRef.update({
  balance,
  streak,
  lastClaim:today
 });
 alert("Daily Reward Claimed!");
}

// ğŸ”¥ LEADERBOARD
function loadLeaderboard(){
 db.ref("users").orderByChild("balance").limitToLast(50).once("value",s=>{
  let arr=[];
  s.forEach(x=>arr.push(x.val()));
  arr.reverse();
  let html="";
  arr.forEach((u,i)=>{
   html+=`<div class="card">#${i+1} â€” ${u.balance||0} TTE</div>`;
  });
  document.getElementById("leaderboard").innerHTML=html;
 });
}
loadLeaderboard();

// ğŸ”¥ REFERRAL
document.getElementById("refLink").value =
"https://t.me/YOUR_BOT?start=ref_"+userId;

userRef.child("referrals").on("value",s=>{
 document.getElementById("refCount").innerText=s.val()||0;
});

// ğŸ”¥ UI
function updateUI(){
 document.getElementById("bal").innerText=Math.floor(balance);
 document.getElementById("eng").innerText=energy;
 document.getElementById("streak").innerText=streak;

 let today=new Date().toISOString().slice(0,10);
 if(lastClaim===today){
  document.getElementById("dailyBtn").disabled=true;
 }
}

// ğŸ”¥ NAV
function show(id,el){
 document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
 document.getElementById(id).classList.add("active");
 document.querySelectorAll(".nav div").forEach(n=>n.classList.remove("on"));
 el.classList.add("on");
 if(id==="leader")loadLeaderboard();
}
</script>

<!-- âœ… LEGAL SAFE TEXT -->
<!--
TTE is an in-app reward point.
No guaranteed value or profit.
-->

</body>
</html>

